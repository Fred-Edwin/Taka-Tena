generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String    @id @default(uuid())
  email     String    @unique
  password  String
  name      String
  userType  UserType
  location  String
  phone     String?
  whatsapp  String?
  verified  Boolean   @default(false)
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt

  listings Listing[]

  @@index([email])
}

enum UserType {
  INDIVIDUAL
  BUSINESS
  RECYCLER
  ARTISAN
  MANUFACTURER
}

model Listing {
  id           String        @id @default(uuid())
  title        String
  description  String        @db.Text
  materialType MaterialType
  quantity     Float
  unit         Unit
  location     String
  images       String[]
  status       ListingStatus @default(AVAILABLE)
  views        Int           @default(0)
  userId       String
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([status])
  @@index([materialType])
  @@index([createdAt])
}

enum MaterialType {
  PLASTIC
  ORGANIC
  CONSTRUCTION
  EWASTE
}

enum Unit {
  KG
  TONNES
  PIECES
  LITERS
  BAGS
}

enum ListingStatus {
  AVAILABLE
  COMPLETED
}
